<div class="info-bar" ng-show="!issues.length && !loading">
  <h3 class="fg-darkCobalt">No data provided</h3>
  <p>No matching entries according the current JIRA&trade; query</p>
</div>

<div class="error-bar" ng-show="jiraRequestFailed">
  <h3 class="fg-white" ng-bind="jiraRequestFailed.0"></h3>
  <p class="fg-white" ng-bind-html="jiraRequestFailed.1"></p>
</div>

<div class="container">
  <div class="tiles">
    <div id="loading" ng-show="loading"><i class="icon-clock"></i></div>

    <h3 ng-show="issues.length">{{workspaceActive.title}}</h3>

    <div id="limit-per-page" class="input-control select" ng-show="!loading">
      <select ng-model="searchMaxResults" ng-change="workspaceRefresh()" integer>
        <option>16</option>
        <option>25</option>
        <option>50</option>
        <option>75</option>
        <option>100</option>
        <option>150</option>
        <option>250</option>
      </select>
    </div>

    <div class="toolbar-vertical" id="home-workspaces"
      ng-hide="workspaces.length < 2 || loading">
      <div>
        <div class="input-control text size3" id="filter"
          ng-show="filterFieldDisplay">
          <input type="text" ng-model="filterText">
        </div>

        <button title="Filter"
          ng-click="filterFieldDisplay = !filterFieldDisplay"
          ng-class="{inverse: filterFieldDisplay || filterText}">
          <i class="icon-filter"></i>
        </button>

        <button title="Refresh" ng-click="workspaceRefresh()">
          <i class="icon-spin"></i>
        </button>

        <button title="Detach this window" ng-click="detachWindow()">
          <i class="icon-new-tab-2"></i>
        </button>
      </div>

      <button title="{{workspace.title}}"
        ng-click="$parent.workspaceSwitchTo($index)"
        ng-repeat="workspace in workspaces"
        ng-class="{default: workspace == workspaceActive}">
        <i class="icon-{{workspace.icon}}"></i>
      </button>
    </div>

    <div class="tile padding10 {{issue._size}} bg-{{issue._colors.bg}} border-{{issue._colors.bd}} outline-{{issue._colors.ot}}"
      ng-repeat="issue in issues | filter:filterText"
      ng-dblclick="tabOpen(issue)"
      ng-class="{selected: issue._isClosed}">

      <div class="issue-icon issue-icon-status bg-{{issue._colors.bd}}" title="{{issue.fields.status.name}}"><img
        ng-src="{{issue.fields.status.iconUrl}}" alt=""></div>

      <div class="tile-content">
        <h4 class="fg-{{issue._colors.fg}}">{{issue.key}}</h4>
        <h6 class="fg-{{issue._colors.fg}}">{{issue.fields.reporter.displayName | limitTo: 16}}</h6>
        <p class="fg-{{issue._colors.fg}}">{{issue.fields.summary}}</p>
      </div>

      <div class="brand">
        <span class="name fg-{{issue._colors.fg}}" ng-hide="timer.isStarted(issue)">
          <sup ng-show="issue.fields.timeestimate">{{issue.fields.timeestimate}}</sup>
          {{issue.fields.issuetype.name}}
        </span>
        <span class="name" ng-show="timer.canBeStopped(issue)" ng-bind="timer.elapsedTime(issue)"></span>
        <span class="badge bg-lightRed" ng-show="timer.isStarted(issue)"><i class="icon-play"></i></span>
      </div>

      <div class="progress-bar" ng-show="issue.fields.progress.percent > 0 && issue.fields.progress.percent < 100">
        <div class="bar bg-{{issue._colors.bg}}" style="width: {{issue.fields.progress.percent}}%"></div>
      </div>

      <div class="toolbar">
        <div class="button-set">
          <button title="Start progress" class="active"
            ng-show="timer.canBeStarted(issue)" ng-click="issueTimerStart(issue)"><i class="icon-play"></i></button>

          <button title="Save time and stop progress" class="active"
            ng-show="timer.canBeStopped(issue)" ng-click="timer.stop(issue)"><i class="icon-stop"></i></button>

          <button title="Stop progress without time-saving" class="active"
            ng-show="timer.canBeStopped(issue)" ng-click="timer.discard(issue)"><i class="icon-remove"></i></button>

          <button title="Actions" class="active transitions"
            ng-show="issue._transitions.length && !timer.isStarted(issue)"><i class="icon-list"></i></button>

          <button title="Open this issue in JIRA&trade;" class="active"
            ng-click="tabOpen(issue)"><i class="icon-new-tab"></i></button>
        </div>
      </div>

      <div class="transitions bg-darker">
        <a href="#" ng-click="transition()" class="bg-white close">&times;</a>
        <div class="padding10">
          <div ng-repeat="trans in issue._transitions">
            <a href="#" class="fg-orange" ng-click="transition(issue, trans)"><small>{{trans.name}}</small></a>
          </div>
        </div>
      </div>
    </div>

    <div id="pagination" class="pagination" ng-show="!loading">
      <ul ng-show="searchMaxResults <  searchTotal">
        <li class="first"><a ng-click="workspaceRefresh(0, searchMaxResults)"><i class="icon-first-2"></i></a></li>
        <li class="prev"><a ng-click="workspaceRefresh(searchOffsetBackward(), searchMaxResults)"><i class="icon-previous"></i></a></li>
        <li class="active"><a>{{ searchStartAt }}â€“{{ searchStartAt + issues.length }} of {{ searchTotal }}</a></li>
        <li class="next"><a ng-click="workspaceRefresh(searchOffsetForward(), searchMaxResults)"><i class="icon-next"></i></a></li>
        <li class="last"><a ng-click="workspaceRefresh(searchTotal - 1, searchMaxResults)"><i class="icon-last-2"></i></a></li>
      </ul>
    </div>

  </div>
</div>
